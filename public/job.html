
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Responsibilities</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/main.css">
  </head>

<body onload="console.log('job.html page loaded')">

  <section>
    <h2>Select</h2>

      <button onclick="daily()">Daily</button><br>
      <button onclick="week()">Weekly</button><br>
      <button onclick="monthly()">Monthly</button><br>

    <section id="jsonDisplay"></section>

    <!-- display section for daily jobs -->
    <section id="daily">
      <h2>Daily jobs</h2>

      <div id="jobs">
      </div>
      <ul id="dailyList"> <li></li>
      </ul>
    
    </section>

    <!-- display section for weekly jobs -->
    <section id="week">

        <h2>Family responsibilities</h2>
          <table id="weekly">
            <tr><th></th>
              <th>Sunday</th>
              <th>Monday</th>
              <th>Tuesday</th>
              <th>Wednesday</th>
              <th>Thursday</th>
              <th>Friday</th>
              <th>Saturday</th>
            </tr>

            <tr id="breakfast">
            </tr>

            <tr id="empty">
            </tr>
      
            <tr class="five">
              <td colspan="8">5 minutes</td>
            </tr>
            <tr class="five" id="play">
            </tr>
            <tr class="five" id="family">
            </tr>
            <tr class="five" id="outside">
            </tr>
            <tr class="five" id="bedroom">
            </tr>
        
            <tr id="together">
            </tr>

            <tr id="dinner">
            </tr>

            <tr id="clear">
            </tr>

            <tr id="washDishes">
            </tr>
          </table>
    </section>


    <!-- display section for monthly jobs -->
    <section id="month">
      <h2>Monthly jobs</h2>
      <ul id="monthList">
        <li style="list-style-type: none">Date: Job - member</li>
      </ul>    
    </section>


  <!-- client-side javaScript -->
  <script>

    // // this function uses AJAX request get the database of members, and populates buttons for each member  
    // function daily() { 
    //   console.log('daily() called');
    //   //show the correct table/list
    //   document.getElementById('daily').style.display = "initial";
    //   document.getElementById('week').style.display  = "none";
    //   document.getElementById('month').style.display = "none";
    //   document.getElementById('jobs').innerHTML = "";

    //   document.body.style.backgroundColor = "lightblue";

    //   //get the assignments from the database
    //   var xmlHttpRequest = new XMLHttpRequest();
    //   xmlHttpRequest.onreadystatechange = function() {
    //     if ( xmlHttpRequest.readyState == XMLHttpRequest.DONE && xmlHttpRequest.status == 200 ) {

    //       //manipulate the DOM with the member names 
    //       console.log('inside daily if statement');
    //       //turn json into an object
    //       var data = JSON.parse(xmlHttpRequest.responseText);

    //       //remove previous data
    //       do { 
    //         dailyList.removeChild(dailyList.lastElementChild);
    //       } while (dailyList.children.length);

    //       //loop through data and add a button to the list
    //       for (var i = 0; i < data.member.length - 1; i++) { 
    //         var item = document.createElement('li');
    //         var iButton = document.createElement('button');
    //         iButton.innerHTML = data.member[i].firstname;
    //         iButton.setAttribute("onclick", 'selectMember("' + data.member[i].firstname + '")');
    //         iButton.setAttribute("class", data.member[i].firstname);
    //         item.appendChild(iButton);

    //         dailyList.appendChild(item);
    //       }
    //     }
    //   };

    //   //the json is from the database here
    //   xmlHttpRequest.open('GET', 'https://nate-node.herokuapp.com/daily', true);
    //   xmlHttpRequest.send();
    // }


    // this function fills in the table for the Weekly job assignments
    function week() { 
      console.log('week() called');
      //show the correct table/list
      document.getElementById('daily').style.display = "none";
      document.getElementById('week').style.display  = "initial";
      document.getElementById('month').style.display = "none";

      document.body.style.backgroundColor = "lightskyblue";

      //get the assignments from the database
      var xmlHttpRequest = new XMLHttpRequest();
      xmlHttpRequest.onreadystatechange = function() {
        if (xmlHttpRequest.readyState == XMLHttpRequest.DONE && xmlHttpRequest.status == 200 ) {

          //manipulate the DOM with the assignments 
          console.log('inside if statement');
          var data = JSON.parse(xmlHttpRequest.responseText);

          //only populate if data doesn't already exist
          if (!dinner.children[4]) { 

            //first row id=breakfast
            var job = document.createElement('td');
            job.innerHTML = data.job[5].jobname;
            breakfast.appendChild(job);

            // create the days of the week for breakfast
            for (var i = 0; i < data.breakfast.length; i++) { 
              var day = document.createElement('td');
              day.innerHTML = data.member[data.breakfast[i].nameid - 1].firstname;
              day.setAttribute("class", data.member[data.breakfast[i].nameid -1].firstname);
              breakfast.appendChild(day);
            }

            //second row id=empty
            var job = document.createElement('td');
            job.innerHTML = data.job[14].jobname;
            empty.appendChild(job);

            // create the days of the week for empty
            for (var i = 0; i < data.empty.length; i++) { 
              var day = document.createElement('td');
              day.innerHTML = data.member[data.empty[i].nameid - 1].firstname;
              day.setAttribute("class", data.member[data.empty[i].nameid -1].firstname);
              empty.appendChild(day);
            }

            // row id=play
            var job = document.createElement('td');
            job.innerHTML = data.job[15].jobname;
            play.appendChild(job);

            // create the days of the week for play 
            for (var i = 0; i < data.play.length; i++) { 
              var day = document.createElement('td');
              day.innerHTML = data.member[data.play[i].nameid - 1].firstname;
              day.setAttribute("class", data.member[data.play[i].nameid -1].firstname);
              play.appendChild(day);
            }

            // row id=family
            var job = document.createElement('td');
            job.innerHTML = data.job[0].jobname;
            family.appendChild(job);

            // create the days of the week for family 
            for (var i = 0; i < data.family.length; i++) { 
              var day = document.createElement('td');
              day.innerHTML = data.member[data.family[i].nameid - 1].firstname;
              day.setAttribute("class", data.member[data.family[i].nameid -1].firstname);
              family.appendChild(day);
            }

            // row id=outside
            var job = document.createElement('td');
            job.innerHTML = data.job[16].jobname;
            outside.appendChild(job);

            // create the days of the week for outside jobs
            for (var i = 0; i < data.outside.length; i++) { 
              var day = document.createElement('td');
              day.innerHTML = data.member[data.outside[i].nameid - 1].firstname;
              day.setAttribute("class", data.member[data.outside[i].nameid -1].firstname);
              outside.appendChild(day);
            }

            // row id=bedroom
            var job = document.createElement('td');
            job.innerHTML = data.job[2].jobname;
            bedroom.appendChild(job);

            // create the days of the week for bedroom 
            for (var i = 0; i < data.bedroom.length; i++) { 
              var day = document.createElement('td');
              day.innerHTML = data.member[data.bedroom[i].nameid - 1].firstname;
              day.setAttribute("class", data.member[data.bedroom[i].nameid -1].firstname);
              bedroom.appendChild(day);
            }

            // row id=together
            var job = document.createElement('td');
            job.innerHTML = "Complete together";
            together.appendChild(job);

            var sun = document.createElement('td');
            sun.innerHTML = "";
            together.appendChild(sun);

            var mon = document.createElement('td');
            mon.innerHTML = data.job[1].jobname;
            together.appendChild(mon);

            var tue = document.createElement('td');
            tue.innerHTML = data.job[2].jobname;
            together.appendChild(tue);

            var wed = document.createElement('td');
            wed.innerHTML = data.job[0].jobname ;
            together.appendChild(wed);

            var thur = document.createElement('td');
            thur.innerHTML = "Special Projects";
            together.appendChild(thur);

            var fri = document.createElement('td');
            fri.innerHTML = data.job[2].jobname;
            together.appendChild(fri);

            var sat = document.createElement('td');
            sat.innerHTML = "";
            together.appendChild(sat);

            // row id=dinner
            var job = document.createElement('td');
            job.innerHTML = data.job[4].jobname;
            dinner.appendChild(job);

            // create the days of the week for dinner
            for (var i = 0; i < data.dinner.length; i++) { 
              var day = document.createElement('td');
              day.innerHTML = data.member[data.dinner[i].nameid - 1].firstname;
              day.setAttribute("class", data.member[data.dinner[i].nameid -1].firstname);
              dinner.appendChild(day);
            }

            // row id=clear
            var job = document.createElement('td');
            job.innerHTML = data.job[3].jobname;
            clear.appendChild(job);

            // create the days of the week for clear
            for (var i = 0; i < data.clear.length; i++) { 
              var day = document.createElement('td');
              day.innerHTML = data.member[data.clear[i].nameid - 1].firstname;
              day.setAttribute("class", data.member[data.clear[i].nameid -1].firstname);
              clear.appendChild(day);
            }

            // row id=washDishes
            var job = document.createElement('td');
            job.innerHTML = data.job[17].jobname;
            washDishes.appendChild(job);

            // create the days of the week for washDishes
            for (var i = 0; i < data.wash.length; i++) { 
              var day = document.createElement('td');
              day.innerHTML = data.member[data.wash[i].nameid - 1].firstname;
              day.setAttribute("class", data.member[data.wash[i].nameid -1].firstname);
              washDishes.appendChild(day);
            }

          }
        }
      };

      //the json is from the database here
      xmlHttpRequest.open('GET', 'https://nate-node.herokuapp.com/week', true);
      xmlHttpRequest.send();
    }


    // //this displays the monthly jobs
    // function monthly() { 
    //   console.log('monthly() called');
    //   //show the correct table/list
    //   document.getElementById('daily').style.display = "none";
    //   document.getElementById('week').style.display  = "none";
    //   document.getElementById('month').style.display = "initial";

    //   document.body.style.backgroundColor = "rgb(155, 226, 240)";

    //   //get the assignments from the database
    //   var xmlHttpRequest = new XMLHttpRequest();
    //   xmlHttpRequest.onreadystatechange = function() {
    //     if ( xmlHttpRequest.readyState == XMLHttpRequest.DONE && xmlHttpRequest.status == 200 ) {

    //       //add list item to the DOM with AJAX using the assignments from the database  
    //       console.log('inside if statement');
    //       var data = JSON.parse(xmlHttpRequest.responseText);

    //       //remove previous data
    //       for (var i = monthList.children.length; i > 1; i--) {
    //         monthList.removeChild(monthList.lastElementChild);
    //       }

    //       //loop through data and add a button to the list
    //       for (var i = 0; i < data.date.length; i++) { 
    //         var item = document.createElement('li');
    //         item.innerHTML = data.date[i] + ": " + data.job[10 + i].jobname + " - ";
    //         var spanName = document.createElement('span');
    //         spanName.innerHTML = data.member[i+3].firstname;
    //         spanName.setAttribute("class", data.member[i+3].firstname);
    //         item.appendChild(spanName);

    //         monthList.appendChild(item);
    //       }
    //     }
    //   };

    //   //the json is from the database here
    //   xmlHttpRequest.open('GET', 'https://nate-node.herokuapp.com/monthly', true);
    //   xmlHttpRequest.send();
    // }


  //   function selectMember(dropdown) {
  //   console.log("received request for selectMember " + dropdown);

  //   switch (dropdown) { 
  //     case "Nate":
  //       dailyJobs(1, dropdown);
  //       break;
  //     case "Jen":
  //       dailyJobs(2, dropdown);
  //       break;
  //     case "grandpa":
  //       dailyJobs(4, dropdown);
  //       break;
  //     case "grandma":
  //       dailyJobs(3, dropdown);
  //       break;
  //     case "Natalie":
  //       dailyJobs(5, dropdown);  
  //       break;
  //     case "Ava":
  //       dailyJobs(6, dropdown);
  //       break;
  //     case "Corbin":
  //       dailyJobs(7, dropdown);
  //       break;
  //   }
  // }

  // function dailyJobs(nameId, name) { 
  //   //get the assignments from the database
  //   var xmlHttpRequest = new XMLHttpRequest();
  //   xmlHttpRequest.onreadystatechange = function() {
  //     if (xmlHttpRequest.readyState == XMLHttpRequest.DONE && xmlHttpRequest.status == 200 ) {

  //       console.log('inside dailyJobs if statement');
  //       var data = JSON.parse(xmlHttpRequest.responseText);
  //       day = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
  //       message = "<h3>" + name + "'s Jobs</h3>";

  //       //looping throught the days of the week
  //       for (var i = 1; i < 7; i ++) {
  //         temp    = "";
  //         if (data.breakfast[i].nameid == nameId) { 
  //           temp += data.job[5].jobname; 
  //         }
  //         if (data.empty[i].nameid == nameId) { 
  //           if (temp != "") {temp += ", ";}
  //           temp += data.job[14].jobname; 
  //         }
  //         if (data.play[i].nameid == nameId) { 
  //           if (temp != "") {temp += ", ";}
  //           temp += data.job[15].jobname; 
  //         }
  //         if (data.family[i].nameid == nameId) { 
  //           if (temp != "") {temp += ", ";}
  //           temp += data.job[0].jobname; 
  //         }
  //         if (data.outside[i].nameid == nameId) { 
  //           if (temp != "") {temp += ", ";}
  //           temp += data.job[16].jobname; 
  //         }
  //         if (data.bedroom[i].nameid == nameId) { 
  //           if (temp != "") {temp += ", ";}
  //           temp += data.job[2].jobname; 
  //         }
  //         if (data.dinner[i].nameid == nameId) { 
  //           if (temp != "") {temp += ", ";}
  //           temp += data.job[4].jobname; 
  //         }
  //         if (data.clear[i].nameid == nameId) { 
  //           if (temp != "") {temp += ", ";}
  //           temp += data.job[3].jobname; 
  //         }
  //         if (data.wash[i].nameid == nameId) { 
  //           if (temp != "") {temp += ", ";}
  //           temp += data.job[17].jobname; 
  //         }

  //         // only add the day if a job exists that day
  //         if (temp) {
  //           message += day[i] + ": " + temp + "<br>";
  //         }
  //       }

  //       document.getElementById('jobs').innerHTML = message;
  //     }
  //   };

  //   //the json is from the database here
  //   xmlHttpRequest.open('GET', 'https://nate-node.herokuapp.com/week', true);
  //   xmlHttpRequest.send();
  // }


  </script>

  <script src="daily.js"></script>
  <script src="weekly.js"></script>
  <script src="monthly.js"></script>

</body>
</html>