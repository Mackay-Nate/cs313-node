
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Come, Follow Me</title>
    <!--<script src=".js"></script>-->
    <!--<link rel="stylesheet" type="text/css" href=".css">-->
    <style>
      body { 
        background: rgb(0, 0, 204);
        color: gold;
        text-align: center;
      }

      table { 
        margin: auto;
        text-align: left;
      }
      
      .col1 { 
        padding: 3px;
        font-variant: small-caps;
      }

      a { 
        color: gold;
        text-decoration: unset;
      }

      input { 
        padding: 10px;
        background: lightblue;
        color: yellow;
      }
    </style>
  </head>

  
<body onload="load(1)">

    <h2>Come, Follow Me</h2>

    <form id="form1">
      <table id="displayTable">
        <tr><th>Dates</th><th>Topic</th><th></th></tr>

      </table>
    </form>


<script>
  function load(week) {

    var myObj, topic, scripture, slink, conduct, osong, oprayer;
    var teacher, csong, cprayer;

    //get the data from the database
    var xmlHttpRequest = new XMLHttpRequest();
    xmlHttpRequest.onreadystatechange = function() {
      if (xmlHttpRequest.readyState == XMLHttpRequest.DONE && xmlHttpRequest.status == 200 ) {
  
        console.log('inside if statement');
        console.log(xmlHttpRequest.readyState);
        console.log(xmlHttpRequest.status);
        var data = JSON.parse(xmlHttpRequest.responseText);


        for (i = 0; i < data.topics.length; i++) 
        { 
          var row = document.createElement("tr");
            //create a cell for the dates
            var item = document.createElement("td");
            //attach a link to the date
            var link = document.createElement("a");
              link.href = "2021weekly.html";
              link.innerHTML = (data.dates[i].weekName);
            item.appendChild(link);
              item.setAttribute("class", "col1");
            row.appendChild(item);

            //create a cell for the topic
            var cellName = document.createElement("td");
              var link = document.createElement("a");
              link.href = "2021weekly.html";
              link.innerHTML = (data.topic[i].scriptName);
              cellName.appendChild(link);
            row.appendChild(cellName);

            row.setAttribute("id", i);
            row.setAttribute("value", i);
            row.setAttribute("onclick", "sessionStorage.setItem('week', " + i + ")");

            document.getElementById('displayTable').appendChild(row);

        // var topic = '<a href="https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-individuals-and-families-doctrine-and-covenants-2021/' + addZero(week) + '?lang=eng" target="_blank">' + data.topic[week - 1].title +'</a>';

        // var scripture = '<a href="https://www.churchofjesuschrist.org/study/scriptures/dc-testament/dc/' + data.scriptLink[week - 1].linkname + '?lang=eng" target="_blank">' + data.scriptures[week - 1].scriptname +'</a>';

        // document.getElementById("dates").innerHTML = data.dates[week - 1].weekname;
        // document.getElementById("conduct").innerHTML = data.family[(week + 2) % 5].firstname;
        // document.getElementById("teacher").innerHTML = data.family[(week + 4) % 5].firstname;
        // document.getElementById("cprayer").innerHTML = data.family[(week + 0) % 5].firstname;
        // document.getElementById("oprayer").innerHTML = data.family[(week + 1) % 5].firstname; 
        // document.getElementById("topic").innerHTML = topic;
        // document.getElementById("scripture").innerHTML = scripture;
        // document.getElementById("osong").innerHTML = 
        // '<a href=' + data.music[data.oSong[week - 1].book - 1].name + ' target="_blank">' + data.oSong[week - 1].name + '</a>';
        // document.getElementById("csong").innerHTML = 
        // '<a href=' + data.music[data.cSong[(week - 1) % 6].book - 1].name + ' target="_blank">' + data.cSong[(week - 1) % 6].name + '</a>';
        // document.getElementById("announce").innerHTML = data.business[week - 1].note;
        // document.getElementById("prs").innerHTML = '<a href=' + data.prslink[week] + ' target="_blank">' + data.prslesson[week] + '</a>';



          }

        }

        //the json is from the database here
        xmlHttpRequest.open('GET', 'https://nate-node.herokuapp.com/cfm', true);
        xmlHttpRequest.send();




    // for (i = 0; i < myObj.topics.length; i++) 
    // { 
    //   var row = document.createElement("tr");
    //     //create a cell for the dates
    //     var item = document.createElement("td");
    //     //attach a link to the date
    //     var link = document.createElement("a");
    //       link.href = "2021weekly.html";
    //       link.innerHTML = (myObj.dates[i]);
    //     item.appendChild(link);
    //       item.setAttribute("class", "col1");
    //     row.appendChild(item);

    //     //create a cell for the topic
    //     var cellName = document.createElement("td");
    //       var link = document.createElement("a");
    //       link.href = "2021weekly.html";
    //       link.innerHTML = (myObj.topics[i]);
    //       cellName.appendChild(link);
    //     row.appendChild(cellName);

    //     row.setAttribute("id", i);
    //     row.setAttribute("value", i);
    //     row.setAttribute("onclick", "sessionStorage.setItem('week', " + i + ")");

    //     document.getElementById('displayTable').appendChild(row);
    }

  };
  
  function getWeek() { 
    let now = new Date();
    let onejan = new Date(now.getFullYear(), 0, 1);
    return (Math.ceil( (((now - onejan) / 86400000) + onejan.getDay() + 1) / 7 ) - 2);
  }
 
</script>
</body>
</html>